<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>jsDigest</title>
  
  <!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  
  <style>
    article, aside, details, figure, footer, header, hgroup, menu, nav, section {
      display: block;
    }
    
    * { margin: 0; padding: 0; }
    
    body {
      padding: 30pt 50pt;
      font: normal 12pt/1.1 sans-serif;
      color: #333;
      background: #667a8f;
    }
    
    code, pre {
      font-family: Consolas, monospace;
      white-space: pre;
    }
    
    img {
      border: 0;
    }
    
    aside {
      float: right;
    }
    aside a {
      color: #6575a4;
      font-size: 10pt;
    }
    
    #forkme {
      position: absolute;
      top: 0;
      right: 0;
    }
    
    #container {
      margin: 0 auto;
      padding: 12pt;
      max-width: 750px;
      min-width: 500px;
      -webkit-border-radius: 10pt;
      -moz-border-radius: 10pt;
      border-radius: 10pt;
      background: #fff;
    }
    
    header h1 {
      display: inline;
      color: #465277;
    }
    header h3 {
      display: inline;
      margin-left: 10pt;
      color: #8592b7;
    }
    
    section.area {
      margin-top: 20pt;
      padding: 5pt;
      -webkit-border-radius: 5pt;
      -moz-border-radius: 5pt;
      border-radius: 5pt;
      background: #e0ebf5;
    }
    section.area h2 {
      margin-bottom: 5pt;
      color: #596897;
    }
    
    section.component {
      padding: 5pt;
    }
    
    section.component + section.component {
      margin-top: 5pt;
    }
    
    section.component .caption {
      border-bottom: 1px solid #aaa;
    }
    
    section.component hgroup.caption {
      font-size: 11pt;
    }
    
    section.detail {
      margin-top: 3pt;
      font-size: 10pt;
    }
    
    section.detail p {
      margin-top: 2pt;
    }
    
    section.detail + section.detail {
      margin-top: 9pt;
    }
    
    section.further {
      margin-top: 12pt;
      background: #cddeef;
    }
    
    #demo {
      background: #ebf2f8;
    }
    
    #demo h2 {
      color: #6575a4;
    }
    
    #demo label {
      font: italic bold 14pt serif;
      color: #69b;
    }
    
    #demo div {
      position: relative;
      height: 17.5pt;
    }
    
    #demo aside {
      float: none;
      position: absolute;
      top: 0pt;
      left: 60pt;
      padding: 0pt;
    }
    
    #demo aside.left {
      top: 3.5pt;
      left: 45pt;
    }
    
    #demo .group {
      margin: 10pt 0;
    }
    
    #demo .group.last {
      margin-bottom: 20pt;
    }
    
    #demo .subgroup {
      margin: 4pt 0;
    }
    
    #using {
      font: bold 12pt serif;
    }
    
    #incode, #result {
      font-size: 9pt;
    }
  </style>
</head>
<body>
  <aside id="forkme">
    <a href="http://github.com/coiscir/jsdigest" target="_blank">
      <img src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" />
    </a>
  </aside>
  
  <div id="container">
    <header>
      <aside>
        <a href="test/index.html">Run Test Suite</a>
      </aside>
      
      <h1>jsDigest</h1>
      <h3>Message Digest for JavaScript</h3>
    </header>
    
    <section class="area" id="demo">
      <h2>Demo</h2>
      
      <section class="component">
        <section class="group">
          <section class="subgroup">
            <div>
              <label for="hash">Hash</label>
              
              <aside>
                <select id="hash" tabindex="1">
                  <option>...</option>
                </select>
              </aside>
            </div>
            
            <div>
              <label for="output">Output</label>
              
              <aside>
                <select id="output" tabindex="2">
                  <option>...</option>
                </select>
              </aside>
          </section>
          
          <section class="subgroup">
            <div>
              <label for="data">Data</label>
              
              <aside>
                <input id="data" tabindex="3">
              </aside>
            </div>
            
            <div>
              <label for="key">Key</label>
              
              <aside class="left">
                <input id="keyed" type="checkbox" tabindex="4">
              </aside>
              
              <aside>
                <input id="key" tabindex="5" style="display:none">
              </aside>
            </div>
          </section>
        </section>
        
        <section class="group">
          <div>
            <label>Using</label>
            
            <aside>
              <b id="using"></b>
            </aside>
          </div>
          
          <div>
            <label>Code</label>
            
            <aside>
              <code id="incode"></code>
            </aside>
          </div>
        </section>
        
        <section class="group last">
          <div>
            <label>Result</label>
            
            <aside>
              <code id="result"></code>
            </aside>
          </div>
        </section>
      </section>
    </section>
    
    <section class="area">
      <h2>Usage</h2>
      
      <section class="component">
        <hgroup class="caption">
          <h4>
            <aside><code>String</code></aside>
            <code>Digest.<i>hash</i>( [ size ], data, [ key ] ).<i>output</i>()</code>
          </h4>
        </hgroup>
        
        <section class="detail">
          <p>
            <aside><code>Function</code></aside>
            <b>hash</b> Hash function to use.
          </p>
          <p>
            <aside><code>Function</code></aside>
            <b>output</b> The format desired for the hash.
          </p>
        </section>
        
        <section class="detail">
          <p>
            <aside><code>Number</code></aside>
            <b>size</b> The output size in bits.
          </p>
          <p>
            <aside><code>String, Array&lt;Number&gt;</code></aside>
            <b>data</b> The input data to be hashed.
          </p>
          <p>
            <aside><code>String, Array&lt;Number&gt;</code></aside>
            <b>key</b> An optional value to use keyed hashing.
          </p>
        </section>
        
        <section class="area further">
          <h3><code>Digest</code></h3>
        
          <section class="component">
            <hgroup class="caption">
              <h4><code><i>hash</i></code> Functions</h4>
            </hgroup>
            
            <section class="detail">
              <p>
                <aside><code>Digest.Encoder</code></aside>
                <b><code>md4       ( size =  128, data, key = null )</code></b>
              </p>
              <p>
                <aside><code>Digest.Encoder</code></aside>
                <b><code>md5       ( size =  128, data, key = null )</code></b>
              </p>
            </section>
            
            <section class="detail">
              <p>
                <aside><code>Digest.Encoder</code></aside>
                <b><code>ripemd128 ( size =  128, data, key = null )</code></b>
              </p>
              <p>
                <aside><code>Digest.Encoder</code></aside>
                <b><code>ripemd160 ( size =  160, data, key = null )</code></b>
              </p>
            </section>
            
            <section class="detail">
              <p>
                <aside><code>Digest.Encoder</code></aside>
                <b><code>sha1      ( size =  160, data, key = null )</code></b>
              </p>
              <p>
                <aside><code>Digest.Encoder</code></aside>
                <b><code>sha224    ( size =  224, data, key = null )</code></b>
              </p>
              <p>
                <aside><code>Digest.Encoder</code></aside>
                <b><code>sha256    ( size =  256, data, key = null )</code></b>
              </p>
              <p>
                <aside><code>Digest.Encoder</code></aside>
                <b><code>sha384    ( size =  384, data, key = null )</code></b>
              </p>
              <p>
                <aside><code>Digest.Encoder</code></aside>
                <b><code>sha512    ( size =  512, data, key = null )</code></b>
              </p>
            </section>
            
            <section class="detail">
              <p>
                <aside><code>Digest.Encoder</code></aside>
                <b><code>skein256  ( size =  256, data, key = null )</code></b>
              </p>
              <p>
                <aside><code>Digest.Encoder</code></aside>
                <b><code>skein512  ( size =  512, data, key = null )</code></b>
              </p>
              <p>
                <aside><code>Digest.Encoder</code></aside>
                <b><code>skein1024 ( size = 1024, data, key = null )</code></b>
              </p>
            </section>
          </section>
          
          <section class="component">
            <hgroup class="caption">
              <aside><i>Chooses related <code>hash</code> function by <code>size</code>.</i></aside>
              <h4>Auto <code><i>hash</i></code> Functions</h4>
            </hgroup>
            
            <section class="component">
              <section class="detail">
                <div class="caption">
                  <p>
                    <aside><code>Digest.Encoder</code></aside>
                    <b><code>ripemd    ( size =  160, data, key = null )</code></b>
                  </p>
                </div>
                <p>
                  <code>ripemd128 ( size <= 128 )</code>
                </p>
                <p>
                  <code>ripemd160 ( size <= 160 )</code>
                </p>
              </section>
              
              <section class="detail">
                <div class="caption">
                  <p>
                    <aside><code>Digest.Encoder</code></aside>
                    <b><code>sha       ( size =  512, data, key = null )</code></b>
                  </p>
                </div>
                <p>
                  <code>sha1      ( size <= 160 )</code>
                </p>
                <p>
                  <code>sha224    ( size <= 224 )</code>
                </p>
                <p>
                  <code>sha256    ( size <= 256 )</code>
                </p>
                <p>
                  <code>sha384    ( size <= 384 )</code>
                </p>
                <p>
                  <code>sha512    ( size <= 512 )</code>
                </p>
              </section>
              
              <section class="detail">
                <div class="caption">
                  <p>
                    <aside><code>Digest.Encoder</code></aside>
                    <b><code>sha2      ( size =  512, data, key = null )</code></b>
                  </p>
                </div>
                <p>
                  <code>sha224    ( size <= 224 )</code>
                </p>
                <p>
                  <code>sha256    ( size <= 256 )</code>
                </p>
                <p>
                  <code>sha384    ( size <= 384 )</code>
                </p>
                <p>
                  <code>sha512    ( size <= 512 )</code>
                </p>
              </section>
              
              <section class="detail">
                <div class="caption">
                  <p>
                    <aside><code>Digest.Encoder</code></aside>
                    <b><code>skein     ( size = 1024, data, key = null )</code></b>
                  </p>
                </div>
                <p>
                  <code>skein256  ( size <= 256 )</code>
                </p>
                <p>
                  <code>skein512  ( size <= 512 )</code>
                </p>
                <p>
                  <code>skein1024 ( size <= 1024 )</code>
                </p>
              </section>
            </section>
          </section>
        </section>
        
        <section class="area further">
          <h3><code>Digest.Encoder</code></h3>
          
          <section class="component">
            <hgroup class="caption">
              <h4><code><i>output</i></code> Methods</h4>
            </hgroup>
            
            <section class="detail">
              <p>
                <aside><code>String ( 0-9 a-f {lower} )</code></aside>
                <b><code>hex()</code></b>
              </p>
              <p>
                <aside><code>String ( 0-9 A-F {UPPER} )</code></aside>
                <b><code>base16()</code></b>
              </p>
              
              <p>
                <aside><code>String ( A-Z 2-7 {UPPER} )</code></aside>
                <b><code>base32()</code></b>
              </p>
              <p>
                <aside><code>String ( 0-9 a-v {lower} )</code></aside>
                <b><code>base32hex()</code></b>
              </p>
              
              <p>
                <aside><code>String ( A-Z a-z 0-9 + / )</code></aside>
                <b><code>base64()</code></b>
              </p>
              <p>
                <aside><code>String ( A-Z a-z 0-9 - _ )</code></aside>
                <b><code>base64url()</code></b>
              </p>
            </section>
          </section>
        </section>
      </section>
    </section>
  </div>
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="lib/latest/digest.js"></script>
<script>
(function ($) {

  var hashes, outputs, hashesSorted, outputsSorted;
  
  hashes = {
    'md4':        { name: 'MD4',             keyed: 'HMAC-MD4'            },
    'md5':        { name: 'MD5',             keyed: 'HMAC-MD5'            },
    'ripemd128':  { name: 'RIPEMD-128',      keyed: 'HMAC-RIPEMD-128'     },
    'ripemd160':  { name: 'RIPEMD-160',      keyed: 'HMAC-RIPEMD-160'     },
    'sha1':       { name: 'SHA-1',           keyed: 'HMAC-SHA-1'          },
    'sha224':     { name: 'SHA-224',         keyed: 'HMAC-SHA-224'        },
    'sha256':     { name: 'SHA-256',         keyed: 'HMAC-SHA-256'        },
    'sha384':     { name: 'SHA-384',         keyed: 'HMAC-SHA-384'        },
    'sha512':     { name: 'SHA-512',         keyed: 'HMAC-SHA-512'        },
    'skein256':   { name: 'Skein-256-256',   keyed: 'Skein-256-256-Key'   },
    'skein512':   { name: 'Skein-512-512',   keyed: 'Skein-512-512-Key'   },
    'skein1024':  { name: 'Skein-1024-1024', keyed: 'Skein-1024-1024-Key' }
  };
  
  outputs = {
    'hex':        'Hex',
    'base16':     'Base-16',
    'base32':     'Base-32',
    'base32hex':  'Base-32 Hex',
    'base64':     'Base-64',
    'base64url':  'Base-64 URL'
  };
  
  hashesSorted = ['md4', 'md5', 'ripemd128', 'ripemd160', 'sha1', 'sha224', 'sha256', 'sha384', 'sha512', 'skein256', 'skein512', 'skein1024'];
  outputsSorted = ['hex', 'base16', 'base32', 'base32hex', 'base64', 'base64url'];
  
  function serialize(string) {
    var escapes = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
      metas = {
        '"'  : '\\"',
        '\b' : '\\b',
        '\f' : '\\f',
        '\n' : '\\n',
        '\r' : '\\r',
        '\t' : '\\t',
        '\\' : '\\\\'
      };
    
    return '"' + (
      escapes.test(string) ?
        string.replace(escapes, function (chr) {
          var meta = metas[chr] || null;
          return meta || '\\u' + ('0000' + chr.charCodeAt(0).toString(16)).slice(-4);
        }) : string
    ) + '"';
  }
  
  function linebreak(result) {
    var LIMIT = 64,
      lines = [],
      remain = String(result);
    
    while (remain.length > LIMIT) {
      lines.push(remain.substr(0, LIMIT));
      remain = remain.substr(LIMIT);
    }
    
    lines.push(remain);
    return lines.join('\n');
  }
  
  function calculate() {
    var incode, result,
      hash = $('#hash').val(),
      out = $('#output').val(),
      data = $('#data').val(),
      key = null,
      keyed = $('#keyed').is(':checked'),
      hashName = hashes[hash].name,
      outName = outputs[out];
    
    if (keyed) {
      key = $('#key').val();
      name = hashes[hash].keyed || name;
    }
    
    incode  = 'Digest.' + hash + '( ';
    incode += serialize(data);
    incode += keyed ? ', ' + serialize(key) : '';
    incode += ' ).' + out + '();';
    
    result = Digest[hash](data, key)[out]();
    
    $('#using').text(hashName + ' ' + outName);
    $('#incode').text(incode);
    $('#result').text(linebreak(result));
  }
  
  $(function () {
    var hashOptions = $.map(hashesSorted, function (hash) {
      return $('<option>').val(hash).text(hashes[hash].name).get(0);
    });
    
    var outputOptions = $.map(outputsSorted, function (output) {
      return $('<option>').val(output).text(outputs[output]).get(0);
    });
    
    $('#hash').html(hashOptions).val('skein1024');
    $('#output').html(outputOptions).val('base64');
  });
    
  $(function () {
    $('#hash, #output, #data, #key').change(calculate).keyup(calculate);
    
    $('#keyed').click(function () {
      $('#key').toggle($(this).is(':checked'));
      calculate();
    });
  });
    
  $(function () {
    $('#data').val('message').select().focus();
    $('#keyed').prop('checked', true);
    $('#key').val('passphrase').show();
    
    calculate();
  });

})(jQuery);
</script>
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-19338884-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
</body>
</html>
